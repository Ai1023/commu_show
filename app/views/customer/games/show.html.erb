<div class="container">
  <div class="row mt-3">
    <div class="col-md-6">
      <div class="card col-6 text-center">
        <div class="card-body">
          <p class="card-text post-nickname">ニックネーム：<%= @game.customer.nickname %></p>
          <p class="card-text post-title">タイトル：<%= @game.game_title %></p>
          <p class="card-text post-body">内容：<%= @game.game_body %></p>
          <p class="card-text post-date">投稿日：<%= @game.created_at.strftime('%Y/%m/%d') %></p>
        </div>
        <% if @game.customer == current_customer %>
          <div class="post-actions">
            <%= link_to "編集する", edit_game_path(@game.id), class: "btn btn-primary" %>
            <%= link_to "削除する", game_path(@game), method: :delete, class: "btn btn-danger", data: { confirm: '本当に削除しますか？' } %>
          </div>
        <% end %>
        </div>
        <% if @game.customer != current_customer %>
          <div class="post-actions mt-3">
            <% if @game.favorited_by?(current_customer) %>
              <%= link_to game_favorites_path(@game), method: :delete, class: "btn btn-danger" do %>
              ♥ <%= @game.favorites.count %> いいね外す
              <% end %>
            <% else %>
              <%= link_to game_favorites_path(@game), method: :post, class: "btn btn-success" do %>
              ♡ <%= @game.favorites.count %> いいね
              <% end %>
            <% end %>
          </div>
        <% end %>
    </div>
    <div class="col-md-6">
      <% if @game.customer != current_customer %>
        <div class="add-comment">
          <%= form_with model: [@game, @post_comment], url: game_post_comments_path(@game), class: "comment-form" do |f| %>
            <%= f.text_area :game_comment, rows: '5', placeholder: "コメントを記入", class: "form-control" %>
            <div class="mt-3">
              <%= f.submit "送信する", class: "btn btn-primary" %>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>

  <div class="row mt-4">
    <div class="post-comments">
      <h5 class="comment-count">コメント件数：<%= @game.post_comments.count %></h5>
      <% @game.post_comments.each do |post_comment| %>
        <div class="comment-item">
          <p class="comment-nickname"><%= post_comment.customer.nickname %></p>
          <p class="comment-date"><%= post_comment.created_at.strftime('%Y/%m/%d') %></p>
          <p class="comment-body"><%= post_comment.game_comment %></p>
          <% if current_customer == post_comment.customer %>
            <%= link_to "削除する", game_post_comment_path(post_comment.game, post_comment), method: :delete, class: "btn btn-danger btn-sm", data: { confirm: '本当に削除しますか？' } %>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>